import { useState } from 'react'

const B = {
  navy: "#121E2D", gold: "#C6A05B", cream: "#F6F3EE",
  goldSoft: "rgba(198,160,91,.10)", goldBorder: "rgba(198,160,91,.22)",
}

function EleviaLogo() {
  return (
    <svg width="180" viewBox="0 0 375 375" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g transform="translate(78,142)">
        <g fill={B.navy} fillOpacity="1">
          <g transform="translate(1.29,77.92)">
            <path d="M 20.5625 -33.453125 C 23.40625 -33.453125 25.789062 -33.625 27.71875 -33.96875 C 29.644531 -34.3125 31.175781 -34.851562 32.3125 -35.59375 C 33.445312 -36.332031 34.265625 -37.28125 34.765625 -38.4375 C 35.265625 -39.59375 35.515625 -40.960938 35.515625 -42.546875 L 38.28125 -42.546875 L 38.28125 -20.953125 L 35.515625 -20.953125 C 35.515625 -22.535156 35.289062 -23.90625 34.84375 -25.0625 C 34.394531 -26.226562 33.601562 -27.191406 32.46875 -27.953125 C 31.332031 -28.722656 29.800781 -29.304688 27.875 -29.703125 C 25.957031 -30.097656 23.519531 -30.296875 20.5625 -30.296875 L 20.5625 -12.421875 C 20.5625 -10.679688 20.769531 -9.242188 21.1875 -8.109375 C 21.613281 -6.972656 22.34375 -6.046875 23.375 -5.328125 C 24.40625 -4.617188 25.757812 -4.117188 27.4375 -3.828125 C 29.125 -3.546875 31.207031 -3.40625 33.6875 -3.40625 C 36.488281 -3.40625 38.863281 -3.601562 40.8125 -4 C 42.757812 -4.394531 44.390625 -5.066406 45.703125 -6.015625 C 47.023438 -6.960938 48.082031 -8.210938 48.875 -9.765625 C 49.664062 -11.316406 50.328125 -13.253906 50.859375 -15.578125 L 53.859375 -15.578125 L 52.671875 0 L 3.5625 0 L 3.5625 -3 C 5.40625 -3.050781 6.894531 -3.207031 8.03125 -3.46875 C 9.164062 -3.738281 10.046875 -4.191406 10.671875 -4.828125 C 11.304688 -5.460938 11.726562 -6.359375 11.9375 -7.515625 C 12.15625 -8.671875 12.265625 -10.171875 12.265625 -12.015625 L 12.265625 -48.875 C 12.265625 -50.71875 12.171875 -52.207031 11.984375 -53.34375 C 11.796875 -54.476562 11.425781 -55.375 10.875 -56.03125 C 10.320312 -56.695312 9.515625 -57.144531 8.453125 -57.375 C 7.398438 -57.613281 6.03125 -57.785156 4.34375 -57.890625 L 4.34375 -60.90625 L 50.0625 -60.90625 L 50.78125 -46.984375 L 48.015625 -46.984375 C 47.691406 -49.085938 47.175781 -50.8125 46.46875 -52.15625 C 45.757812 -53.5 44.785156 -54.566406 43.546875 -55.359375 C 42.304688 -56.148438 40.734375 -56.703125 38.828125 -57.015625 C 36.929688 -57.335938 34.640625 -57.5 31.953125 -57.5 L 21.90625 -57.5 C 21.007812 -57.5 20.5625 -57.050781 20.5625 -56.15625 Z M 22.0625 -67.234375 L 32.34375 -73.3125 C 33.820312 -74.21875 35.078125 -74.878906 36.109375 -75.296875 C 37.140625 -75.722656 38.179688 -75.9375 39.234375 -75.9375 C 40.128906 -75.9375 40.851562 -75.695312 41.40625 -75.21875 C 41.957031 -74.738281 42.234375 -74.050781 42.234375 -73.15625 C 42.234375 -72.3125 41.691406 -71.585938 40.609375 -70.984375 C 39.535156 -70.378906 38.097656 -69.863281 36.296875 -69.4375 L 26.8125 -67.234375 Z"/>
          </g>
          <g transform="translate(53.17,77.92)">
            <path d="M 16.53125 -12.34375 C 16.53125 -10.332031 16.609375 -8.71875 16.765625 -7.5 C 16.921875 -6.289062 17.25 -5.34375 17.75 -4.65625 C 18.257812 -3.976562 18.972656 -3.503906 19.890625 -3.234375 C 20.816406 -2.972656 22.039062 -2.816406 23.5625 -2.765625 L 23.5625 0 L 1.734375 0 L 1.734375 -2.765625 C 3.316406 -2.816406 4.582031 -2.988281 5.53125 -3.28125 C 6.476562 -3.570312 7.226562 -4.03125 7.78125 -4.65625 C 8.34375 -5.289062 8.710938 -6.175781 8.890625 -7.3125 C 9.078125 -8.445312 9.171875 -9.9375 9.171875 -11.78125 L 9.171875 -45.875 C 9.171875 -48.71875 9.128906 -51.101562 9.046875 -53.03125 C 8.972656 -54.957031 8.859375 -56.265625 8.703125 -56.953125 C 8.441406 -58.160156 7.820312 -58.972656 6.84375 -59.390625 C 5.863281 -59.816406 4.109375 -60.03125 1.578125 -60.03125 L 1.578125 -62.71875 L 16.53125 -65.640625 Z"/>
          </g>
          <g transform="translate(73.34,77.92)">
            <path d="M 41.28125 -7.359375 C 36.800781 -1.921875 31.238281 0.796875 24.59375 0.796875 C 21.488281 0.796875 18.671875 0.28125 16.140625 -0.75 C 13.609375 -1.78125 11.429688 -3.226562 9.609375 -5.09375 C 7.785156 -6.96875 6.375 -9.207031 5.375 -11.8125 C 4.375 -14.425781 3.875 -17.316406 3.875 -20.484375 C 3.875 -23.703125 4.398438 -26.679688 5.453125 -29.421875 C 6.515625 -32.160156 8.003906 -34.503906 9.921875 -36.453125 C 11.847656 -38.410156 14.140625 -39.941406 16.796875 -41.046875 C 19.460938 -42.148438 22.378906 -42.703125 25.546875 -42.703125 C 30.660156 -42.703125 34.613281 -41.316406 37.40625 -38.546875 C 40.207031 -35.785156 41.609375 -31.820312 41.609375 -26.65625 C 41.609375 -25.914062 41.460938 -25.46875 41.171875 -25.3125 C 40.878906 -25.15625 40.207031 -25.078125 39.15625 -25.078125 L 13.125 -25.078125 C 13.019531 -24.648438 12.941406 -24.132812 12.890625 -23.53125 C 12.835938 -22.925781 12.8125 -22.253906 12.8125 -21.515625 C 12.8125 -18.773438 13.140625 -16.28125 13.796875 -14.03125 C 14.460938 -11.789062 15.414062 -9.878906 16.65625 -8.296875 C 17.894531 -6.722656 19.367188 -5.5 21.078125 -4.625 C 22.796875 -3.757812 24.707031 -3.328125 26.8125 -3.328125 C 29.03125 -3.328125 31.085938 -3.8125 32.984375 -4.78125 C 34.878906 -5.757812 36.828125 -7.359375 38.828125 -9.578125 Z M 28.234375 -28.71875 C 29.285156 -28.71875 30.128906 -28.742188 30.765625 -28.796875 C 31.398438 -28.847656 31.875 -28.953125 32.1875 -29.109375 C 32.507812 -29.265625 32.722656 -29.488281 32.828125 -29.78125 C 32.929688 -30.070312 32.984375 -30.453125 32.984375 -30.921875 C 32.984375 -33.347656 32.203125 -35.285156 30.640625 -36.734375 C 29.085938 -38.191406 26.96875 -38.921875 24.28125 -38.921875 C 18.582031 -38.921875 15.050781 -35.519531 13.6875 -28.71875 Z M 18.984375 -51.484375 L 29.265625 -60.90625 C 31.160156 -62.644531 32.925781 -63.515625 34.5625 -63.515625 C 35.457031 -63.515625 36.179688 -63.273438 36.734375 -62.796875 C 37.285156 -62.328125 37.5625 -61.644531 37.5625 -60.75 C 37.5625 -59.90625 37.207031 -59.148438 36.5 -58.484375 C 35.789062 -57.828125 34.800781 -57.207031 33.53125 -56.625 L 22.703125 -51.484375 Z"/>
          </g>
        </g>
      </g>
      <g transform="translate(192,126)">
        <g fill={B.navy} fillOpacity="1">
          <g transform="translate(1.54,83.04)">
            <path d="M 0.625 -48.84375 L 11.515625 -48.84375 L 23.03125 -11.65625 L 23.453125 -11.65625 L 34.890625 -48.84375 L 45.78125 -48.84375 L 30.140625 0.0625 L 16.265625 0.0625 Z"/>
          </g>
          <g transform="translate(43.9,83.04)">
            <path d="M 4.109375 -48.84375 L 15.078125 -48.84375 L 15.078125 0 L 4.109375 0 Z"/>
          </g>
          <g transform="translate(57.58,83.04)">
            <path d="M 31.40625 -11.296875 L 15.765625 -11.296875 L 12.28125 0 L 1.25 0 L 18.625 -48.84375 L 28.75 -48.84375 L 45.984375 0 L 34.953125 0 Z M 28.75 -19.609375 L 23.71875 -35.375 L 23.3125 -35.375 L 18.421875 -19.609375 Z"/>
          </g>
        </g>
      </g>
      <g transform="translate(211,209)">
        <g fill={B.navy} fillOpacity="0.5">
          <g transform="translate(2.02,15.03)"><path d="M 0.703125 -9.5 L 3.15625 -9.5 L 6.625 -3.234375 L 6.671875 -3.234375 L 6.671875 -9.5 L 8.765625 -9.5 L 8.765625 0.015625 L 6.28125 0.015625 L 2.828125 -6.015625 L 2.796875 -6.015625 L 2.796875 0.015625 L 0.703125 0.015625 Z"/></g>
          <g transform="translate(10.75,15.03)"><path d="M 4.65625 0.140625 C 3.5 0.140625 2.550781 -0.195312 1.8125 -0.875 C 1.070312 -1.5625 0.703125 -2.65625 0.703125 -4.15625 L 0.703125 -9.5 L 2.8125 -9.5 L 2.8125 -4.296875 C 2.8125 -2.691406 3.425781 -1.890625 4.65625 -1.890625 C 5.3125 -1.890625 5.78125 -2.109375 6.0625 -2.546875 C 6.34375 -2.992188 6.484375 -3.578125 6.484375 -4.296875 L 6.484375 -9.5 L 8.578125 -9.5 L 8.578125 -4.15625 C 8.578125 -2.65625 8.207031 -1.5625 7.46875 -0.875 C 6.738281 -0.195312 5.800781 0.140625 4.65625 0.140625 Z"/></g>
          <g transform="translate(19.3,15.03)"><path d="M 7.5625 -7.65625 L 5.078125 -7.65625 L 5.078125 0 L 2.96875 0 L 2.96875 -7.65625 L 0.46875 -7.65625 L 0.46875 -9.5 L 7.5625 -9.5 Z"/></g>
          <g transform="translate(26.58,15.03)"><path d="M 3.90625 -3.328125 L 2.8125 -3.328125 L 2.8125 0 L 0.703125 0 L 0.703125 -9.5 L 4.3125 -9.5 C 5.0625 -9.5 5.695312 -9.351562 6.21875 -9.0625 C 6.738281 -8.769531 7.125 -8.382812 7.375 -7.90625 C 7.625 -7.4375 7.75 -6.925781 7.75 -6.375 C 7.75 -5.757812 7.59375 -5.203125 7.28125 -4.703125 C 6.976562 -4.210938 6.53125 -3.847656 5.9375 -3.609375 L 7.96875 0 L 5.765625 0 Z M 2.8125 -5.046875 L 3.96875 -5.046875 C 4.457031 -5.046875 4.867188 -5.144531 5.203125 -5.34375 C 5.535156 -5.550781 5.703125 -5.894531 5.703125 -6.375 C 5.703125 -6.832031 5.535156 -7.160156 5.203125 -7.359375 C 4.878906 -7.554688 4.46875 -7.65625 3.96875 -7.65625 L 2.8125 -7.65625 Z"/></g>
          <g transform="translate(34.25,15.03)"><path d="M 0.796875 -9.5 L 2.921875 -9.5 L 2.921875 0 L 0.796875 0 Z"/></g>
          <g transform="translate(37.25,15.03)"><path d="M 7.5625 -7.65625 L 5.078125 -7.65625 L 5.078125 0 L 2.96875 0 L 2.96875 -7.65625 L 0.46875 -7.65625 L 0.46875 -9.5 L 7.5625 -9.5 Z"/></g>
          <g transform="translate(44.54,15.03)"><path d="M 0.796875 -9.5 L 2.921875 -9.5 L 2.921875 0 L 0.796875 0 Z"/></g>
          <g transform="translate(47.54,15.03)"><path d="M 4.890625 0.125 C 3.941406 0.125 3.132812 -0.09375 2.46875 -0.53125 C 1.8125 -0.96875 1.316406 -1.554688 0.984375 -2.296875 C 0.660156 -3.035156 0.5 -3.851562 0.5 -4.75 C 0.5 -5.644531 0.664062 -6.46875 1 -7.21875 C 1.332031 -7.96875 1.828125 -8.566406 2.484375 -9.015625 C 3.148438 -9.460938 3.953125 -9.6875 4.890625 -9.6875 C 5.816406 -9.6875 6.609375 -9.460938 7.265625 -9.015625 C 7.921875 -8.578125 8.410156 -7.976562 8.734375 -7.21875 C 9.066406 -6.46875 9.234375 -5.640625 9.234375 -4.734375 C 9.234375 -3.828125 9.066406 -3.003906 8.734375 -2.265625 C 8.410156 -1.535156 7.921875 -0.953125 7.265625 -0.515625 C 6.609375 -0.0859375 5.816406 0.125 4.890625 0.125 Z M 4.875 -1.765625 C 5.550781 -1.765625 6.070312 -2.046875 6.4375 -2.609375 C 6.800781 -3.179688 6.984375 -3.898438 6.984375 -4.765625 C 6.984375 -5.609375 6.800781 -6.320312 6.4375 -6.90625 C 6.082031 -7.5 5.5625 -7.796875 4.875 -7.796875 C 4.414062 -7.796875 4.023438 -7.65625 3.703125 -7.375 C 3.390625 -7.09375 3.148438 -6.722656 2.984375 -6.265625 C 2.828125 -5.804688 2.75 -5.304688 2.75 -4.765625 C 2.75 -3.921875 2.929688 -3.207031 3.296875 -2.625 C 3.671875 -2.050781 4.195312 -1.765625 4.875 -1.765625 Z"/></g>
          <g transform="translate(56.59,15.03)"><path d="M 0.703125 -9.5 L 3.15625 -9.5 L 6.625 -3.234375 L 6.671875 -3.234375 L 6.671875 -9.5 L 8.765625 -9.5 L 8.765625 0.015625 L 6.28125 0.015625 L 2.828125 -6.015625 L 2.796875 -6.015625 L 2.796875 0.015625 L 0.703125 0.015625 Z"/></g>
        </g>
      </g>
    </svg>
  )
}

export default function LoginScreen({ onSignIn }) {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [error, setError] = useState(null)
  const [loading, setLoading] = useState(false)

  const handleSubmit = async (e) => {
    e.preventDefault()
    setError(null)
    setLoading(true)
    const { error } = await onSignIn(email, password)
    if (error) {
      setError(error.message === 'Invalid login credentials'
        ? 'Email ou mot de passe incorrect.'
        : error.message)
    }
    setLoading(false)
  }

  return (
    <div style={styles.container}>
      <div style={styles.topBar} />
      <div style={styles.card}>
        <div style={styles.logoRow}>
          <EleviaLogo />
        </div>

        <form onSubmit={handleSubmit} style={styles.form}>
          <input
            type="email"
            placeholder="Email"
            value={email}
            onChange={e => setEmail(e.target.value)}
            style={styles.input}
            autoComplete="email"
            required
          />
          <input
            type="password"
            placeholder="Mot de passe"
            value={password}
            onChange={e => setPassword(e.target.value)}
            style={styles.input}
            autoComplete="current-password"
            required
          />
          {error && <div style={styles.error}>{error}</div>}
          <button type="submit" style={styles.button} disabled={loading}>
            {loading ? 'Connexion...' : 'Se connecter'}
          </button>
        </form>

        <div style={styles.footer}>
          Pas encore de compte ? Prends rendez-vous sur<br/>
          <a href="https://www.elevianutrition.com" target="_blank" rel="noopener noreferrer" style={{ color: B.gold, fontWeight: 600, textDecoration: 'none' }}>elevianutrition.com</a>
        </div>
      </div>
      <div style={styles.version}>v1.1.0</div>
    </div>
  )
}

const styles = {
  container: {
    width: '100%', maxWidth: 430, height: '100dvh', margin: '0 auto',
    background: B.cream,
    display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center',
    position: 'relative', overflow: 'hidden', fontFamily: "'DM Sans', -apple-system, sans-serif",
  },
  topBar: {
    position: 'absolute', top: 0, left: 0, right: 0, height: 4,
    background: `linear-gradient(90deg, ${B.gold}, ${B.navy})`,
  },
  card: {
    position: 'relative', zIndex: 1, width: '85%', maxWidth: 340,
    textAlign: 'center',
  },
  logoRow: {
    display: 'flex', alignItems: 'center', justifyContent: 'center',
    marginBottom: 8,
  },
  form: {
    marginTop: 32, display: 'flex', flexDirection: 'column', gap: 12,
  },
  input: {
    width: '100%', padding: '14px 16px', borderRadius: 14,
    border: '1px solid rgba(15,30,46,.12)', background: '#FFFFFF',
    color: B.navy, fontSize: 15, fontFamily: "'DM Sans', sans-serif",
    outline: 'none', boxSizing: 'border-box',
  },
  error: {
    fontSize: 13, color: '#FF3B30', textAlign: 'center', padding: '4px 0',
  },
  button: {
    width: '100%', padding: 14, borderRadius: 14, background: B.navy,
    color: '#FFFFFF', fontSize: 15, fontWeight: 800, border: 'none',
    cursor: 'pointer', fontFamily: "'DM Sans', sans-serif", marginTop: 4,
  },
  footer: {
    marginTop: 32, fontSize: 12, color: 'rgba(15,30,46,.4)', lineHeight: 1.6,
  },
  version: {
    position: 'absolute', bottom: 40, fontSize: 10, color: 'rgba(15,30,46,.2)',
    letterSpacing: 1,
  },
}
